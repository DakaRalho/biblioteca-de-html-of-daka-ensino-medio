<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Comunidade</title>
    <style>
        /* Estilos de CSS... */
    </style>
</head>
<body>
    <header>
        <h1>Comunidade</h1>
        <div id="user-info"></div>
    </header>

    <main>
        <div class="server-list">
            <h2>Servidores</h2>
            <ul id="server-list"></ul>
        </div>

        <div class="post-form">
            <h2>Novo Post</h2>
            <textarea id="post-content" rows="4" placeholder="Digite seu post aqui"></textarea>
            <button onclick="submitPost()">Postar</button>
        </div>

        <div class="posts">
            <h2>Posts</h2>
            <ul id="post-list"></ul>
        </div>
    </main>

    <footer>
        <p>&copy; 2023 Reddit-Like Page. Todos os direitos reservados.</p>
    </footer>

    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-firestore.js"></script>
    <script>
        // Inicialize o Firebase...
const firebaseConfig = {
            apiKey: "YOUR_API_KEY",
            authDomain: "YOUR_AUTH_DOMAIN",
            projectId: "YOUR_PROJECT_ID",
            storageBucket: "YOUR_STORAGE_BUCKET",
            messagingSenderId: "YOUR_MESSAGING_SENDER_ID",
            appId: "YOUR_APP_ID"
        };
        firebase.initializeApp(firebaseConfig);

        
        // Funções de autenticação...
// Funções de autenticação do Firebase
function signUp() {
    const email = document.getElementById('signup-email').value;
    const password = document.getElementById('signup-password').value;

    firebase.auth().createUserWithEmailAndPassword(email, password)
        .then((userCredential) => {
            const user = userCredential.user;
            updateUI(user);
        })
        .catch((error) => {
            console.error(error);
            // Trate o erro de criação de conta aqui
        });
}

function signIn() {
    const email = document.getElementById('login-email').value;
    const password = document.getElementById('login-password').value;

    firebase.auth().signInWithEmailAndPassword(email, password)
        .then((userCredential) => {
            const user = userCredential.user;
            updateUI(user);
        })
        .catch((error) => {
            console.error(error);
            // Trate o erro de login aqui
        });
}

function signOut() {
    firebase.auth().signOut()
        .then(() => {
            updateUI(null);
        })
        .catch((error) => {
            console.error(error);
        });
}

// Verifique o estado de autenticação ao carregar a página
firebase.auth().onAuthStateChanged((user) => {
    updateUI(user);
});

        
        // Funções de servidor...
// Funções de servidor
function createServer() {
    const serverName = prompt('Digite o nome do servidor:');
    if (serverName) {
        const user = firebase.auth().currentUser;

        if (user) {
            const serversRef = firebase.firestore().collection('servers');
            serversRef.add({
                name: serverName,
                owner: user.uid
            })
            .then(() => {
                console.log('Servidor criado com sucesso');
                loadServerList();
            })
            .catch((error) => {
                console.error(error);
            });
        } else {
            console.error('Usuário não autenticado');
        }
    }
}

function loadServerList() {
    const serverList = document.getElementById('server-list');
    serverList.innerHTML = '';

    const serversRef = firebase.firestore().collection('servers');
    serversRef.get()
        .then((querySnapshot) => {
            querySnapshot.forEach((doc) => {
                const serverData = doc.data();
                const serverItem = document.createElement('li');
                serverItem.textContent = serverData.name;
                serverList.appendChild(serverItem);
            });
        })
        .catch((error) => {
            console.error(error);
        });
}

// Carregue a lista de servidores ao iniciar a página
loadServerList();

        
        // Funções de postagem...
// Funções de postagem
function submitPost() {
    const postContent = document.getElementById('post-content').value;
    const user = firebase.auth().currentUser;

    if (user && postContent.trim() !== '') {
        const currentServer = getCurrentServer(); // Implemente essa função para obter o servidor atual
        if (currentServer) {
            const postsRef = firebase.firestore().collection('servers').doc(currentServer.id).collection('posts');
            postsRef.add({
                content: postContent,
                userId: user.uid,
                timestamp: firebase.firestore.FieldValue.serverTimestamp()
            })
            .then(() => {
                console.log('Postagem enviada com sucesso');
                loadPosts();
            })
            .catch((error) => {
                console.error(error);
            });
        } else {
            console.error('Nenhum servidor selecionado');
        }
    }
}

function loadPosts() {
    const postList = document.getElementById('post-list');
    postList.innerHTML = '';

    const currentServer = getCurrentServer(); // Implemente essa função para obter o servidor atual
    if (currentServer) {
        const postsRef = firebase.firestore().collection('servers').doc(currentServer.id).collection('posts');
        postsRef.orderBy('timestamp', 'desc').get()
            .then((querySnapshot) => {
                querySnapshot.forEach((doc) => {
                    const postData = doc.data();
                    const postItem = document.createElement('li');
                    postItem.innerHTML = `<strong>${postData.userId}:</strong> ${postData.content}`;
                    postList.appendChild(postItem);
                });
            })
            .catch((error) => {
                console.error(error);
            });
    }
}

// Carregue a lista de postagens ao iniciar a página
loadPosts();

        
    </script>
</body>
</html>
